{% extends 'base.html.twig' %}

{% block title %}{{ libro.titulo }}{% endblock %}

{% block body %}
<div class="container" style="max-width: 800px; margin: auto; padding: 20px;">
    <a href="{{ path('libro_catalogo') }}" style="display:inline-block; margin-bottom:15px; text-decoration:none; color:#007bff;">⬅ Volver al catálogo</a>

    <div style="display: flex; gap: 20px; flex-wrap: wrap; border:1px solid #ddd; border-radius:10px; padding:20px; background:white; box-shadow:0 2px 5px rgba(0,0,0,0.1);">
        
        <div style="flex:1; min-width:250px;">
            <img src="/uploads/libros/{{ libro.imagen }}" alt="{{ libro.titulo }}" style="width:100%; border-radius:8px; object-fit:cover;">
        </div>

        <div style="flex:2; min-width:300px;">
            <h2 style="margin-top:0;">{{ libro.titulo }}</h2>
            <p><strong>Autor:</strong> {{ libro.autor }}</p>
            <p><strong>Género:</strong> {{ libro.genero }}</p>
            
            <p><strong>Estado:</strong>
                {% if libro.estado.value == 'Disponible' %}
                    <span style="color:green;">✔ Disponible</span>
                {% else %}
                    <span style="color:red;">✘ Prestado</span>
                {% endif %}
            </p>
            <hr>
            <p style="font-size:15px; line-height:1.6;">{{ libro.descripcion }}</p>

            <div style="margin-top:20px;">
                {% if libro.estado.value == 'Disponible' %}
                    {% if is_granted('ROLE_USER') %}
                    <a href="{{ path('reserva_libro', {id: libro.id}) }}" class="btn btn-primary"> Reservar libro</a>
                {% else %}
                    <p>
                         <a href="{{ path('app_login') }}">Iniciar sesión</a> para reservar este libro.
                    </p>
                {% endif %}
                {% else %}
                    <button class="btn btn-secondary" disabled>No disponible</button>
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
